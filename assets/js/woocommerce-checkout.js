function gtmkit_cart(){document.addEventListener("click",function(e){let t=e.target;if(!t||!t.closest("[name=update_cart]"))return!0;gtmkit_cart_quantity_change()}),document.addEventListener("keypress",function(e){let t=e.target;if(!t||!t.closest(".woocommerce-cart-form input[type=number]"))return!0;gtmkit_cart_quantity_change()})}function gtmkit_cart_quantity_change(){document.querySelectorAll(".product-quantity input.qty").forEach(function(e){var t=e.defaultValue;let n=parseInt(e.value);if(t!==(n=isNaN(n)?t:n)){const c=e.closest(".cart_item"),i=c&&c.querySelector(".remove");if(i){const a=JSON.parse(i.getAttribute("data-gtmkit_product_data"));t<n?(a.quantity=n-t,window[datalayer_name].push({event:"add_to_cart",ecommerce:{currency:wc.currency,value:a.price*(n-t),items:[a]}})):(a.quantity=t-n,window[datalayer_name].push({event:"remove_from_cart",ecommerce:{currency:wc.currency,value:a.price*(t-n),items:[a]}}))}}})}function gtmkit_checkout(){0===wc.add_shipping_info.config&&0===wc.add_payment_info.config||(2===wc.add_shipping_info.config&&document.addEventListener("change",function(e){let t=e.target;if(!t||!t.closest("input[name^=shipping_method]"))return!0;gtmkit_shipping_event()}),2===wc.add_payment_info.config&&document.addEventListener("change",function(e){let t=e.target;if(!t||!t.closest("input[name=payment_method]"))return!0;gtmkit_payment_event()}),document.addEventListener("submit",function(e){let t=e.target;if(!t||!t.closest("form[name=checkout]"))return!0;gtmkit_shipping_event(),gtmkit_payment_event()}))}function gtmkit_shipping_event(){if(!0!==wc.add_shipping_info.fired){let e=document.querySelector("input[name^=shipping_method]:checked");var t=(e=e||document.querySelector("input[name^=shipping_method]"))?e.value:wc.text["shipping tier not found"];window[datalayer_name].push({event:"add_shipping_info",ecommerce:{currency:wc.currency,value:wc.cart_value,shipping_tier:t,items:wc.cart_items}}),wc.add_shipping_info.fired=!0}}function gtmkit_payment_event(){if(!0!==wc.add_payment_info.fired){let e=document.querySelector(".payment_methods input:checked");var t=(e=e||document.querySelector("input[name^=payment_method]"))?e.value:wc.text["payment type not found"];window[datalayer_name].push({event:"add_payment_info",ecommerce:{currency:wc.currency,value:wc.cart_value,payment_type:t,items:wc.cart_items}}),wc.add_payment_info.fired=!0}}