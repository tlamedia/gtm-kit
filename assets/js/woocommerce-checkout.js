function gtmkit_load_checkout(){gtmkit_data.wc.is_cart&&gtmkit_cart(),gtmkit_data.wc.is_checkout&&gtmkit_checkout()}function gtmkit_cart(){document.addEventListener("click",function(t){t=t.target;if(!t||!t.closest("[name=update_cart]"))return!0;gtmkit_cart_quantity_change()}),document.addEventListener("keypress",function(t){t=t.target;if(!t||!t.closest(".woocommerce-cart-form input[type=number]"))return!0;gtmkit_cart_quantity_change()})}function gtmkit_cart_quantity_change(){document.querySelectorAll(".product-quantity input.qty").forEach(function(t){var e=t.defaultValue;let n=parseInt(t.value);e!==(n=isNaN(n)?e:n)&&(t=(t=t.closest(".cart_item"))&&t.querySelector(".remove"))&&(t=JSON.parse(t.getAttribute("data-gtmkit_product_data")),e<n?(t.quantity=n-e,window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:"add_to_cart",ecommerce:{currency:gtmkit_data.wc.currency,value:t.price*(n-e),items:[t]}})):(t.quantity=e-n,window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:"remove_from_cart",ecommerce:{currency:gtmkit_data.wc.currency,value:t.price*(e-n),items:[t]}})))})}function gtmkit_checkout(){0===gtmkit_settings.wc.add_shipping_info.config&&0===gtmkit_settings.wc.add_payment_info.config||(2===gtmkit_settings.wc.add_shipping_info.config&&document.addEventListener("change",function(t){t=t.target;if(!t||!t.closest("input[name^=shipping_method]")&&!t.closest(".wc-block-components-shipping-rates-control"))return!0;gtmkit_shipping_event()}),2===gtmkit_settings.wc.add_payment_info.config&&document.addEventListener("change",function(t){t=t.target;if(!t||!t.closest("input[name=payment_method]")&&!t.closest(".wc-block-checkout__payment-method"))return!0;gtmkit_payment_event()}),document.addEventListener("click",function(t){t=t.target.closest("button");return!t||!t.classList.contains("wc-block-components-checkout-place-order-button")&&!t.closest("button[name=woocommerce_checkout_place_order]")||(gtmkit_shipping_event(),void gtmkit_payment_event())}))}function gtmkit_shipping_event(){if(!0!==gtmkit_data.wc.add_shipping_info.fired){let t;var e=(t=!0===gtmkit_data.wc.block?(t=document.querySelector(".wc-block-components-shipping-rates-control input[type^=radio]:checked"))||document.querySelector(".wc-block-components-shipping-rates-control input[type^=radio]"):(t=document.querySelector("input[name^=shipping_method]:checked"))||document.querySelector("input[name^=shipping_method]"))?t.value:gtmkit_settings.wc.text["shipping-tier-not-found"];window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:"add_shipping_info",ecommerce:{currency:gtmkit_data.wc.currency,value:gtmkit_data.wc.cart_value,shipping_tier:e,items:gtmkit_data.wc.cart_items}}),gtmkit_data.wc.add_shipping_info.fired=!0}}function gtmkit_payment_event(){if(!0!==gtmkit_data.wc.add_payment_info.fired){let t;var e=(t=!0===gtmkit_data.wc.block?(t=document.querySelector(".wc-block-checkout__payment-method input[type^=radio]:checked"))||document.querySelector(".wc-block-checkout__payment-method input[type^=radio]"):(t=document.querySelector(".payment_methods input:checked"))||document.querySelector("input[name^=payment_method]"))?t.value:gtmkit_settings.wc.text["payment-method-not-found"];window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:"add_payment_info",ecommerce:{currency:gtmkit_data.wc.currency,value:gtmkit_data.wc.cart_value,payment_type:e,items:gtmkit_data.wc.cart_items}}),gtmkit_data.wc.add_payment_info.fired=!0}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",gtmkit_load_checkout):gtmkit_load_checkout();