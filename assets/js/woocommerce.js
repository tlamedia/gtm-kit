const wc=window.gtmkit_settings.wc,datalayer_name=window.gtmkit_settings.datalayer_name;function gtmkit_load(){let d,c={"wp-block-handpicked-products":1,"wp-block-product-best-sellers":1,"wp-block-product-category":1,"wp-block-product-new":1,"wp-block-product-on-sale":1,"wp-block-products-by-attribute":1,"wp-block-product-tag":1,"wp-block-product-top-rated":1},t=(document.querySelectorAll(".wc-block-grid .wc-block-grid__product").forEach(function(t){var e=t.closest(".wc-block-grid");const a=t.querySelector(".gtmkit_product_data");if(e&&a){const o=e.classList;if(o)for(var r in c)if(o.contains(r)){let t=JSON.parse(a.getAttribute("data-gtmkit_product_data"));t.item_list_name=wc.text[r],t.index=c[r],a.setAttribute("data-gtmkit_product_data",JSON.stringify(t)),c[r]++}}}),document.querySelectorAll(".gtmkit_product_data"));if(t.length){let e=[],a;t.forEach(function(t){a=JSON.parse(t.getAttribute("data-gtmkit_product_data")),e.push(a)}),window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:"view_item_list",ecommerce:{items:e}})}document.addEventListener("click",function(t){let e=t.target,a;if(!e)return!0;if(e.closest(".add_to_cart_button:not(.single_add_to_cart_button)"))a="add_to_cart";else{if(!e.closest(".products")&&!e.closest(".wc-block-grid__products")||!e.closest(".add_to_wishlist, .tinvwl_add_to_wishlist_button:not(.tinvwl-product-in-list)"))return!0;a="add_to_wishlist"}const r=e.closest(".product,.wc-block-grid__product"),o=r&&r.querySelector(".gtmkit_product_data");if(!o)return!0;t=JSON.parse(o.getAttribute("data-gtmkit_product_data"));window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:a,ecommerce:{currency:wc.currency,value:t.price,items:[t]}})}),document.addEventListener("click",function(a){let t=a.target,c;if(!t)return!0;let r;if((r=t.closest("form.cart"))&&t.closest(".single_add_to_cart_button:not(.disabled)"))c="add_to_cart";else if(r&&t.closest(".tinvwl_add_to_wishlist_button:not(.tinvwl-product-in-list,.disabled-add-wishlist)"))c="add_to_wishlist";else{const o=t.closest(".yith-wcwl-add-to-wishlist");o&&(r=o.parentNode.querySelector("form.cart"))&&(c="add_to_wishlist")}if(!c)return!0;var a=r.querySelectorAll("[name=variation_id]"),e=r.classList&&r.classList.contains("grouped_form");if(a.length){let t=1,e;d&&(a=r.querySelector("[name=quantity]"),d.quantity=a&&a.value||1,t=d.quantity,e=d.price),(d&&"add_to_cart"==c||"add_to_wishlist"==c)&&(window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:c,ecommerce:{currency:wc.currency,value:e*t,items:[d]}}))}else if(e){const i=document.querySelectorAll(".grouped_form .gtmkit_product_data");let r=[],o=0;if(i.forEach(function(t){var e=document.querySelectorAll("input[name=quantity\\["+t.getAttribute("data-gtmkit_product_id")+"\\]]");if(0===(e=parseInt(e[0].value)))return!0;let a=JSON.parse(t.getAttribute("data-gtmkit_product_data"));a.quantity=e,r.push(a),o+=a.price*a.quantity}),0===r.length)return!0;window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:c,ecommerce:{currency:wc.currency,value:o,items:r}})}else{let t=JSON.parse(r.querySelector("[name=gtmkit_product_data]")&&r.querySelector("[name=gtmkit_product_data]").value);t.quantity=r.querySelector("[name=quantity]")&&r.querySelector("[name=quantity]").value,window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:c,ecommerce:{currency:wc.currency,value:t.price*t.quantity,items:[t]}})}}),document.addEventListener("click",function(t){const e=t.target;return!e||!e.closest(".mini_cart_item a.remove,.product-remove a.remove")||(!(t=JSON.parse(e.getAttribute("data-gtmkit_product_data")))||void window[datalayer_name].push({event:"remove_from_cart",ecommerce:{items:[t]}}))});document.addEventListener("click",function(t){const e=t.target;if(!e.closest(".products li:not(.product-category) a:not(.add_to_cart_button,.add_to_wishlist,.tinvwl_add_to_wishlist_button),.wc-block-grid__products li:not(.product-category) a:not(.add_to_cart_button,.add_to_wishlist,.tinvwl_add_to_wishlist_button),.woocommerce-grouped-product-list-item__label a:not(.add_to_wishlist,.tinvwl_add_to_wishlist_button)"))return!0;let a=e.closest(".product,.wc-block-grid__product"),r;return!a||(void 0===(r=a.querySelector(".gtmkit_product_data")).getAttribute("data-gtmkit_product_data")||(!(t=JSON.parse(r.getAttribute("data-gtmkit_product_data")))||void window[datalayer_name].push({event:"select_item",ecommerce:{items:[t]}})))}),jQuery(document).on("found_variation",function(a,r){if(void 0!==r){const c=a.target;let t=JSON.parse(c.querySelector("[name=gtmkit_product_data]")&&c.querySelector("[name=gtmkit_product_data]").value),e=(t.item_id=r.variation_id,wc.use_sku&&r.sku&&""!==r.sku&&(t.item_id=r.sku),t.price=r.display_price,[]);for(var o in r.attributes)e.push(r.attributes[o]);t.item_variant=e.filter(t=>t).join("|"),d=t,0!==wc.view_item.config&&(window[datalayer_name].push({ecommerce:null}),window[datalayer_name].push({event:"view_item",ecommerce:{currency:wc.currency,value:t.price,items:[t]}}))}}),wc.is_cart&&gtmkit_cart(),wc.is_checkout&&gtmkit_checkout()}"loading"==document.readyState?document.addEventListener("DOMContentLoaded",gtmkit_load):gtmkit_load();