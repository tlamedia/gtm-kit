(()=>{"use strict";const t=window.wp.hooks,i="gtmkit-woocommerce-google-analytics",e="experimental__woocommerce_blocks",n=(t,i)=>{window[window.gtmkit_settings.datalayer_name].push({ecommerce:null}),window[window.gtmkit_settings.datalayer_name].push({event:t,eventParams:i}),"on"===window.gtmkit_settings.console_log&&console.log(`Pushing event ${t}`)},c=()=>{if(!0===window.gtmkit_data.wc.add_shipping_info.fired)return;const t={ecommerce:{currency:window.gtmkit_data.wc.currency,value:window.gtmkit_data.wc.cart_value,shipping_tier:window.gtmkit_data.wc.chosen_shipping_method,items:window.gtmkit_data.wc.cart_items}};n("add_shipping_info",t),window.gtmkit_data.wc.add_shipping_info.fired=!0},a=()=>{if(!0===window.gtmkit_data.wc.add_payment_info.fired)return;const t={ecommerce:{currency:window.gtmkit_data.wc.currency,value:window.gtmkit_data.wc.cart_value,payment_type:window.gtmkit_data.wc.chosen_payment_method,items:window.gtmkit_data.wc.cart_items}};n("add_payment_info",t),window.gtmkit_data.wc.add_payment_info.fired=!0};(0,t.addAction)(`${e}-checkout-set-selected-shipping-rate`,i,(({shippingRateId:t})=>{window.gtmkit_data.wc.chosen_shipping_method=t,0!==window.gtmkit_settings.wc.add_shipping_info.config&&!1!==window.gtmkit_data.wc.is_checkout&&2===window.gtmkit_settings.wc.add_shipping_info.config&&c()})),(0,t.addAction)(`${e}-checkout-set-active-payment-method`,i,(({value:t})=>{window.gtmkit_data.wc.chosen_payment_method=t,0!==window.gtmkit_settings.wc.add_payment_info.config&&2===window.gtmkit_settings.wc.add_payment_info.config&&a()})),(0,t.addAction)(`${e}-checkout-submit`,i,(()=>{0!==window.gtmkit_settings.wc.add_shipping_info.config&&c(),0!==window.gtmkit_settings.wc.add_payment_info.config&&a()})),(0,t.addAction)(`${e}-cart-set-item-quantity`,i,(({product:t,quantity:i=1})=>{if(t.quantity<i){const e=i-t.quantity,c=JSON.parse(t.extensions.gtmkit.item);c.quantity=e;const a={ecommerce:{currency:window.gtmkit_data.wc.currency,value:t.prices.sale_price/100*e,items:[c]}};n("add_to_cart",a)}else{const e=t.quantity-i,c=JSON.parse(t.extensions.gtmkit.item);c.quantity=e;const a={ecommerce:{currency:window.gtmkit_data.wc.currency,value:t.prices.sale_price/100*e,items:[c]}};n("remove_from_cart",a)}})),(0,t.addAction)(`${e}-cart-remove-item`,i,(({product:t,quantity:i})=>{const e=JSON.parse(t.extensions.gtmkit.item),c={ecommerce:{currency:window.gtmkit_data.wc.currency,value:t.prices.sale_price/100*i,items:[e]}};n("remove_from_cart",c)})),(0,t.addAction)(`${e}-cart-add-item`,i,(({product:t,quantity:i=1})=>{const e=JSON.parse(t.extensions.gtmkit.item),c={ecommerce:{currency:window.gtmkit_data.wc.currency,value:t.prices.sale_price/100*i,items:[e]}};n("add_to_cart",c)}))})();