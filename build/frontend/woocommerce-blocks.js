(()=>{"use strict";const t=window.wp.hooks,e="gtmkit-woocommerce-google-analytics",i="experimental__woocommerce_blocks",a=(t,e)=>{window[gtmkit_settings.datalayer_name].push({ecommerce:null}),window[gtmkit_settings.datalayer_name].push({event:t,eventParams:e}),"on"===gtmkit_settings.console_log&&console.log(`Pushing event ${t}`)},c=()=>{if(!0===gtmkit_data.wc.add_shipping_info.fired)return;let t={ecommerce:{currency:gtmkit_data.wc.currency,value:gtmkit_data.wc.cart_value,shipping_tier:gtmkit_data.wc.chosen_shipping_method,items:gtmkit_data.wc.cart_items}};a("add_shipping_info",t),gtmkit_data.wc.add_shipping_info.fired=!0},n=()=>{if(!0===gtmkit_data.wc.add_payment_info.fired)return;let t={ecommerce:{currency:gtmkit_data.wc.currency,value:gtmkit_data.wc.cart_value,payment_type:gtmkit_data.wc.chosen_payment_method,items:gtmkit_data.wc.cart_items}};a("add_payment_info",t),gtmkit_data.wc.add_payment_info.fired=!0};(0,t.addAction)(`${i}-checkout-set-selected-shipping-rate`,e,(({shippingRateId:t})=>{gtmkit_data.wc.chosen_shipping_method=t,0!==gtmkit_settings.wc.add_shipping_info.config&&2===gtmkit_settings.wc.add_shipping_info.config&&c()})),(0,t.addAction)(`${i}-checkout-set-active-payment-method`,e,(({value:t})=>{gtmkit_data.wc.chosen_payment_method=t,0!==gtmkit_settings.wc.add_payment_info.config&&2===gtmkit_settings.wc.add_payment_info.config&&n()})),(0,t.addAction)(`${i}-checkout-submit`,e,(()=>{0!==gtmkit_settings.wc.add_shipping_info.config&&c(),0!==gtmkit_settings.wc.add_payment_info.config&&n()})),(0,t.addAction)(`${i}-cart-set-item-quantity`,e,(({product:t,quantity:e=1})=>{if(t.quantity<e){let i=e-t.quantity,c=JSON.parse(t.extensions.gtmkit.item);c.quantity=i;let n={ecommerce:{currency:gtmkit_data.wc.currency,value:t.prices.sale_price/100*i,items:[c]}};a("add_to_cart",n)}else{let i=t.quantity-e,c=JSON.parse(t.extensions.gtmkit.item);c.quantity=i;let n={ecommerce:{currency:gtmkit_data.wc.currency,value:t.prices.sale_price/100*i,items:[c]}};a("remove_from_cart",n)}})),(0,t.addAction)(`${i}-cart-remove-item`,e,(({product:t,quantity:e})=>{let i=JSON.parse(t.extensions.gtmkit.item),c={ecommerce:{currency:gtmkit_data.wc.currency,value:t.prices.sale_price/100*e,items:[i]}};a("remove_from_cart",c)})),(0,t.addAction)(`${i}-cart-add-item`,e,(({product:t,quantity:e=1})=>{let i=JSON.parse(t.extensions.gtmkit.item),c={ecommerce:{currency:gtmkit_data.wc.currency,value:t.prices.sale_price/100*e,items:[i]}};a("add_to_cart",c)}))})();